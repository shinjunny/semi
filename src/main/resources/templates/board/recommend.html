<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì ì‹¬ ë©”ë‰´ ì¶”ì²œ</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>
	<script src="/static/js/Winwheel.min.js"></script>
	<style>
		:root {
		  --primary-color: #ff7f50;
		  --light-bg: #f4f5f7;
		  --text-color: #333;
		  --accent-color: #ff7f50;
		  --box-bg: #ffffff;
		  --box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08);
		}

		body {
		  font-family: "Segoe UI", "Pretendard", sans-serif;
		  background-color: var(--light-bg);
		  margin: 0;
		  padding: 0;
		  color: var(--text-color);
		}

		header .img {
		  text-align: center;
		  padding: 20px 0;
		}

		header img {
		  height: 80px;
		}

		h1 {
		  font-size: 28px;
		  text-align: center;
		  color: var(--primary-color);
		  margin-top: 0;
		  padding-top: 20px;
		  font-weight: 700;
		}

		.sub-title {
		  text-align: center;
		  font-size: 20px;
		  color: #555;
		  margin-top: -10px;
		  opacity: 0;
		  animation: fadeIn 1s ease forwards;
		  animation-delay: 0.5s;
		}

		@keyframes fadeIn {
		  to {
		    opacity: 1;
		  }
		}

		.recommend-box {
		  display: flex;
		  flex-direction: column;
		  gap: 16px;
		  max-width: 420px;
		  margin: 30px auto;
		  padding: 30px 24px;
		  background-color: var(--box-bg);
		  border-radius: 16px;
		  box-shadow: var(--box-shadow);
		  text-align: center;
		  position: relative;
		}

		.recommend-box img {
		  width: 64px;
		  margin: 0 auto -8px;
		  animation: float 2s ease-in-out infinite;
		}

		@keyframes float {
		  0%, 100% { transform: translateY(0); }
		  50% { transform: translateY(-6px); }
		}

		select {
		  padding: 12px;
		  font-size: 16px;
		  border: 1px solid #ddd;
		  border-radius: 8px;
		  appearance: none;
		  background-color: #fff;
		  transition: border-color 0.3s;
		}

		select:focus {
		  outline: none;
		  border-color: var(--primary-color);
		  box-shadow: 0 0 0 3px rgba(255, 127, 80, 0.2);
		}

		button, a.btn {
		  padding: 12px;
		  font-size: 16px;
		  background: linear-gradient(to right, #ff7f50, #ffa07a);
		  color: white;
		  border: none;
		  border-radius: 10px;
		  font-weight: 600;
		  cursor: pointer;
		  transition: background-color 0.3s, transform 0.2s ease;
		  box-shadow: 0 6px 12px rgba(255, 127, 80, 0.2);
		}

		button:hover, a.btn:hover {
		  transform: translateY(-2px);
		}

		#recommendationResult {
		  margin-top: 20px;
		  font-size: 18px;
		  color: var(--primary-color);
		  font-weight: bold;
		}

		@media (max-width: 500px) {
		  .recommend-box {
		    padding: 20px 16px;
		    gap: 12px;
		  }

		  select, button {
		    font-size: 15px;
		    padding: 10px;
		  }

		  #recommendationResult {
		    font-size: 16px;
		  }
		}

		@keyframes fadeInDown {
		  0% {
		    opacity: 0;
		    transform: translate(-50%, -20px);
		  }
		  100% {
		    opacity: 1;
		    transform: translate(-50%, 0);
		  }
		}

		#wheel-indicator {
		  position: absolute;
		  top: 220px;
		  left: 50%;
		  transform: translateX(-50%);
		  width: 0;
		  height: 0;
		  border-left: 15px solid transparent;
		  border-right: 15px solid transparent;
		  border-top: 25px solid red;
		  z-index: 10;
		  
		  opacity: 0; /* ì´ˆê¸°ì—” ìˆ¨ê¹€ */
		  animation-fill-mode: forwards;
		}
		
		a.btn {
		  text-decoration: none;
		}
	</style>
</head>

<body>
	<header>
	   <h1 style="text-align:center">ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ğŸ½ï¸</h1>
	   <div class="sub-title">ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ê³ ë¯¼ ë~ ğŸ™</div>
	 </header>
	 
<div class="recommend-box">
    <select id="mealType" onchange="updateNextSelect('mealType')">
        <option value="" hidden>ì‹ì‚¬ ì¢…ë¥˜ ì„ íƒ</option>
        <option value="meal">ì‹ì‚¬</option>
        <option value="cook">ìš”ë¦¬</option>
        <option value="snack">ê°„ì‹</option>
    </select>

    <select id="foodStyle" onchange="updateNextSelect('foodStyle')" disabled>
        <option value="" hidden>ìŒì‹ ì¢…ë¥˜ ì„ íƒ</option>
        <option value="korean">í•œì‹</option>
        <option value="chinese">ì¤‘ì‹</option>
        <option value="japanese">ì¼ì‹</option>
        <option value="western">ì–‘ì‹</option>
        <option value="asian">ì•„ì‹œì•„</option>
    </select>

    <select id="situation" disabled>
        <option value="" hidden>ìƒí™© ì„ íƒ</option>
        <option value="alone">í˜¼ë°¥</option>
        <option value="friend">ì¹œêµ¬</option>
        <option value="date">ì—°ì¸</option>
        <option value="family">ê°€ì¡±</option>
        <option value="group">ëª¨ì„</option>
    </select>
	
	<canvas id="wheelcanvas" width="500" height="500"></canvas>
	<!--button onclick="spinWheel()">ë£°ë › ëŒë¦¬ê¸°!</button-->
	<div id="wheel-indicator"></div>
	<div id="wheelResult" style="text-align: center; margin-top: 20px; font-size: 1.2em;"></div>

	<div class="button-group" style="display:flex; gap:10px; justify-content:center; flex-wrap: wrap;">
	  <button onclick="recommendMenu()">ì¶”ì²œë°›ê¸°!</button>
	  <button onclick="reRecommendMenu()">ë‹¤ì‹œ ì¶”ì²œ!</button>
	  <a href="/" class="btn">í™ˆìœ¼ë¡œ!</a>
	</div>
	<div id="recommendationArea">
	  <div id="rouletteWrapper">
	    <div id="roulette"></div>
	  </div>
	</div>
	<script>
	    const menuMap = {
		   // ğŸš meal (ì‹ì‚¬)
		   "meal_korean_alone": ["ê¹€ì¹˜ì°Œê°œ", "ëœì¥ì°Œê°œ", "ì œìœ¡ë®ë°¥", "ë¹„ë¹”ë°¥", "ìˆœë‘ë¶€ì°Œê°œ"],
		   "meal_korean_family": ["ë³´ìŒˆ ì •ì‹", "ì‚¼ê²¹ì‚´", "ê°ìíƒ•", "ë‹­ë„ë¦¬íƒ•", "ë¶ˆê³ ê¸° ë°±ë°˜"],
		   "meal_korean_friend": ["ëŒì†¥ë¹„ë¹”ë°¥", "ë¶€ëŒ€ì°Œê°œ", "ì¹¼êµ­ìˆ˜", "ì­ˆê¾¸ë¯¸ë³¶ìŒ", "ë‹­ê°ˆë¹„"],
		   "meal_korean_date": ["ë¶ˆê³ ê¸°ìŒˆë°¥", "ê½ƒê²Œíƒ•", "ì—°ì–´ë¹„ë¹”ë°¥", "í•œì •ì‹ ì½”ìŠ¤", "ì˜¤ê²¹ì‚´ ìƒëŸ¬ë“œ"],
		   "meal_korean_group": ["ì¡±ë°œë³´ìŒˆ ì„¸íŠ¸", "í•œìƒì°¨ë¦¼", "ì „ê³¨", "ê¹€ì¹˜ì „+ë§‰ê±¸ë¦¬", "ë¹„ë¹”êµ­ìˆ˜ ëŒ€ì ‘ì‹œ"],

		   "meal_chinese_alone": ["ì§œì¥ë©´", "ì§¬ë½•", "ë§ˆíŒŒë‘ë¶€ë®ë°¥", "ë³¶ìŒë°¥", "íƒ•ìˆ˜ìœ¡ ì†Œ"],
		   "meal_chinese_family": ["ë§ˆë¼íƒ•", "ì–‘ì¥í”¼", "íŒ”ë³´ì±„", "ê¹í’ê¸°", "ìœ ì‚°ìŠ¬"],
		   "meal_chinese_friend": ["ê¿”ë°”ë¡œìš°", "ë©˜ë³´ìƒ¤", "ê³ ì¶”ì¡ì±„", "ì¤‘êµ­ì‹ ë³¶ìŒìš°ë™", "ë§ˆë¼ìƒ¹ê¶ˆ"],
		   "meal_chinese_date": ["í› ê¶ˆ", "ì˜¤í–¥ì¥ìœ¡ ìƒëŸ¬ë“œ", "í¬ë¦¼ìƒˆìš°", "í•´ì‚°ë¬¼ ì§¬ë½•", "ê³ ì¶”ê¸°ë¦„ ë³¶ìŒë©´"],
		   "meal_chinese_group": ["ì¤‘ì‹ ë·”í˜", "ëŒ€ì™• ë§ˆë¼íƒ•", "ê°€ì¡±ì„¸íŠ¸ ë©”ë‰´", "ì°¨ì˜¤íŒ ëŒ€ì ‘ì‹œ", "ì˜¤í–¥ì¡±ë°œ"],
	
		   "meal_japanese_alone": ["ê·œë™", "ê°€ì¸ ë™", "ë¼ë©˜", "ìŠ¤ì‹œ", "ìš°ë™"],
		   "meal_japanese_family": ["ëˆì¹´ì¸  ì •ì‹", "ëƒ„ë¹„ìš°ë™", "ì•¼ë¼ì†Œë°”", "ì˜¤ë…ë‚˜ë² ", "ìŠ¤í‚¤ì•¼í‚¤"],
		   "meal_japanese_friend": ["ì‚¬ì¼€ë™", "ê°€ë¼ì•„ê²Œ ì •ì‹", "ì•¼ë¼ë‹ˆê¾¸", "ì˜¤ë¯€ë¼ì´ìŠ¤", "ì´ˆë°¥ì„¸íŠ¸"],
		   "meal_japanese_date": ["ì˜¤ë§ˆì¹´ì„¸ ìŠ¤ì‹œ", "í…ë™ ì •ì‹", "ë§ˆì°¨ ë””ì €íŠ¸ í”Œë ˆì´íŠ¸", "ê·œì¹´ì¸ ", "ë‚˜ê°€ì‚¬í‚¤ ì§¬ë½•"],
		   "meal_japanese_group": ["ì´ìì¹´ì•¼ ë©”ë‰´", "ìš°ë™+ë´í‘¸ë¼ ì„¸íŠ¸", "ì˜¤ê¼¬ë…¸ë¯¸ì•¼ë¼ ëŒ€íŒ", "ì—°ì–´ìƒëŸ¬ë“œ", "ë¡¤ í”Œë˜í„°"],
	
		   "meal_western_alone": ["ì¹˜í‚¨ë²„ê±°", "ìŠ¤íŒŒê²Œí‹°", "í¬ë¦¼ìˆ˜í”„", "í´ëŸ½ìƒŒë“œìœ„ì¹˜", "ì—ê·¸ë² ë„¤ë”•íŠ¸"],
		   "meal_western_family": ["í”¼ì íŒ¨ë°€ë¦¬ì„¸íŠ¸", "íŒŒìŠ¤íƒ€ 3ì¢…", "ê°ë°”ìŠ¤", "ì¹˜í‚¨ í”Œë˜í„°", "ìŠ¤í…Œì´í¬"],
		   "meal_western_friend": ["í–„ë²„ê±° ì„¸íŠ¸", "ë‚˜ìµ¸&ì‚´ì‚¬", "í•«ìœ™", "ì¹˜ì¦ˆí”„ë¼ì´", "ì†Œì‹œì§€ í”Œë˜í„°"],
		   "meal_western_date": ["ìŠ¤í…Œì´í¬ + ì™€ì¸", "ê¹Œë¥´ë³´ë‚˜ë¼ íŠ¸ëŸ¬í”Œ íŒŒìŠ¤íƒ€", "ë¸Œë£¨ìŠ¤ì¼€íƒ€ & ì¹˜ì¦ˆ í”Œë ˆì´íŠ¸", "ë¡œì œ ë¦¬ì¡°ë˜", "í‹°ë¼ë¯¸ìˆ˜ ë””ì €íŠ¸"],
	   	   "meal_western_group": ["í”¼ì ë·”í˜", "ë·”í˜ì‹ ìƒëŸ¬ë“œë°”", "íŒŒìŠ¤íƒ€ ë¬´í•œë¦¬í•„", "ì¹˜í‚¨&ê°ì ì…°ì–´ë§", "ìƒŒë“œìœ„ì¹˜ í”Œë˜í„°"],
	
		   "meal_asian_alone": ["íŒŸíƒ€ì´", "ë°˜ë¯¸", "í¬", "ë¯¸ê³ ë­", "ë‚˜ì‹œê³ ë "],
		   "meal_asian_family": ["ë² íŠ¸ë‚¨ ìŒ€êµ­ìˆ˜", "ì‚¬ë–¼", "ë¶„ì§œ", "ì›”ë‚¨ìŒˆ", "ë‚˜ì‹œë ˆë§‰"],
		   "meal_asian_friend": ["ìŒ€êµ­ìˆ˜+ìŠ¤í”„ë§ë¡¤ ì„¸íŠ¸", "ë°˜ë¯¸ ì„¸íŠ¸", "íŒŸì¹´íŒŒì˜¤", "íŠ€ê¹€ í”Œë˜í„°", "ë¡œë "],
		   "meal_asian_date": ["íŒŸíƒ€ì´ + ë˜ ì–Œê¿", "ë°”ì‚­í•œ ë°˜ë¯¸ ìƒŒë“œìœ„ì¹˜", "ë² íŠ¸ë‚¨ ìŒ€êµ­ìˆ˜", "ì‚¬ë–¼ í”Œë˜í„°", "ë§ê³  ì°¹ìŒ€ë°¥"],
		   "meal_asian_group": ["íƒœêµ­ ë·”í˜", "ì¸ë„ë„¤ì‹œì•„ ì»¤ë¦¬ì„¸íŠ¸", "ì‹±ê°€í¬ë¥´ ì¹ ë¦¬í¬ë©", "ë¼ì˜¤ìŠ¤ì‹ ë³¶ìŒë©´", "í•„ë¦¬í•€ ì¡±ë°œíŠ€ê¹€"],
	
		   // ğŸ³ cook (ìš”ë¦¬ ì¤‘ì‹¬)
		   "cook_korean_alone": ["ê³„ë€ë§ì´", "ê¹€ì¹˜ë³¶ìŒë°¥", "ê°„ì¥ê³„ë€ë°¥", "ê°ìì¡°ë¦¼", "ì†Œê³ ê¸°ë¬´êµ­"],
		   "cook_korean_family": ["ë¶ˆê³ ê¸°", "ë‹­ê°ˆë¹„", "ê°ˆë¹„ì°œ", "ì¡ì±„", "ë–¡ê°ˆë¹„"],
		   "cook_korean_friend": ["ê¹€ì¹˜ì „", "í•´ë¬¼íŒŒì „", "ë‹­ê°•ì •", "ê°ìíƒ•", "ë¼ì§€ë¶ˆë°±"],
		   "cook_korean_date": ["í•œìš°ìŠ¤í…Œì´í¬", "ì „ë³µì£½", "ì¥ì–´ë®ë°¥", "ì‚¼ê³„íƒ•", "ê½ƒê²Œì°œ"],
		   "cook_korean_group": ["ì „ê³¨ìš”ë¦¬", "ë¶€ëŒ€ì°Œê°œ", "í•´ë¬¼ì°œ", "ë§¤ìš´ê°ˆë¹„ì°œ", "ì”ì¹˜êµ­ìˆ˜"],

		   "cook_chinese_alone": ["ê³„ë€ë³¶ìŒë°¥", "ë§ˆíŒŒë‘ë¶€", "í† ë§ˆí† ê³„ë€íƒ•", "êµ°ë§Œë‘", "ì¶˜ê¶Œ"],
		   "cook_chinese_family": ["íŒ”ë³´ì±„", "ê¹í’ê¸°", "ê³ ì¶”ì¡ì±„", "ë§ˆë¼ìƒ¹ê¶ˆ", "ìœ ì‚°ìŠ¬"],
		   "cook_chinese_friend": ["ë©˜ë³´ìƒ¤", "ê¿”ë°”ë¡œìš°", "ì§¬ë½•íƒ•", "í¬ë¦¼ìƒˆìš°", "íƒ•ìˆ˜ìœ¡"],
		   "cook_chinese_date": ["ì¹ ë¦¬ìƒˆìš°", "í› ê¶ˆ", "ì˜¤í–¥ì¥ìœ¡", "ê°€ì§€ë³¶ìŒ", "ì‚¬ì²œì‹ ìƒì„ ì°œ"],
		   "cook_chinese_group": ["ë§ˆë¼íƒ•", "ì¤‘êµ­ì‹ ì°œë‹­", "ìƒ¤ì˜¤ë¡±ë°”ì˜¤", "ì—°íƒœíƒ•", "ì„¸íŠ¸íƒ•ìˆ˜ìœ¡"],

		   "cook_japanese_alone": ["ì˜¤ì½”ë…¸ë¯¸ì•¼ë¼", "ì¹´ë ˆ", "ê·œë™", "ê°€ë¼ì•„ê²Œ", "íƒ€ì½”ì•¼ë¼"],
		   "cook_japanese_family": ["ëˆì¹´ì¸ ", "ë‚˜ë² ", "ìŠ¤í‚¤ì•¼í‚¤", "ì¥ì–´ë®ë°¥", "ê³ ë¡œì¼€"],
		   "cook_japanese_friend": ["ì•¼í‚¤ì†Œë°”", "ê·œì¹´ì¸ ", "ê°€ì¸ ì¹´ë ˆ", "ì˜¤ë…íƒ•", "ë¯¸ì†Œë¼ë©˜"],
		   "cook_japanese_date": ["ì‚¬ì‹œë¯¸ í”Œë˜í„°", "ì˜¤ë§ˆì¹´ì„¸", "ìŠ¤í‚¤ì•¼í‚¤", "ë§ˆì°¨ í¬ë¦¼íŒŒìŠ¤íƒ€", "ì—°ì–´ ì•„ë³´ì¹´ë„ë¡¤"],
		   "cook_japanese_group": ["ë¡¤ í”Œë˜í„°", "ì´ˆë°¥ ë·”í˜", "ì´ìì¹´ì•¼ ìš”ë¦¬ì„¸íŠ¸", "ëƒ„ë¹„ìš°ë™ ëŒ€ì ‘ì‹œ", "ë´í‘¸ë¼ íŒŒí‹°ë°•ìŠ¤"],

		   "cook_western_alone": ["íŒ¬ì¼€ì´í¬", "í”„ë Œì¹˜í† ìŠ¤íŠ¸", "ê³„ë€ìŠ¤í¬ë¨ë¸”", "ë§ˆì¹´ë¡œë‹ˆì¹˜ì¦ˆ", "ì‹œë¦¬ì–¼ë³¼"],
		   "cook_western_family": ["ë¼ìëƒ", "ê°ë°”ìŠ¤", "ì¹˜í‚¨ ì»¤í‹€ë¦¿", "ë¡œìŠ¤íŠ¸ ì¹˜í‚¨", "ìŠ¤í…Œì´í¬"],
		   "cook_western_friend": ["ì¹˜í‚¨í…ë”", "ì¹˜ì¦ˆí”„ë¼ì´", "ê°ìê·¸ë¼íƒ±", "í•«ìœ™", "í¬ë¦¼ìŠ¤í”„"],
		   "cook_western_date": ["ë¹„í”„ì›°ë§í„´", "íŠ¸ëŸ¬í”Œ ë¦¬ì¡°ë˜", "ë¡œì œ íŒŒìŠ¤íƒ€", "í‹°ë³¸ìŠ¤í…Œì´í¬", "ë¸Œë£¨ìŠ¤ì¼€íƒ€"],
		   "cook_western_group": ["í–„ë²„ê±° íŒŒí‹°", "íŒŒìŠ¤íƒ€ ë·”í˜", "ë°”ë² í í”Œë˜í„°", "ë‚˜ìµ¸ íƒ€ì›Œ", "í”¼ì DIY íŒŒí‹°"],

		   "cook_asian_alone": ["íŒŸíƒ€ì´", "ë³¶ìŒêµ­ìˆ˜", "ë¶„ì§œ", "ë¯¸ê³ ë­", "ë³¶ìŒë°¥"],
		   "cook_asian_family": ["ì›”ë‚¨ìŒˆ", "ì‚¬ë–¼", "í¬", "ë‚˜ì‹œë ˆë§‰", "ìŒ€êµ­ìˆ˜"],
		   "cook_asian_friend": ["ë°˜ë¯¸ìƒŒë“œìœ„ì¹˜", "ì¶˜ê¶Œ", "ë˜ ì–Œê¿", "ë°”ë¯¸ë¦¬ì—£", "ì•„ì‹œì•„ì‹ ë®ë°¥"],
		   "cook_asian_date": ["ë§ê³  ì°¹ìŒ€ë°¥", "ì‚¬í…Œ í”Œë˜í„°", "ë¼ì˜¤ìŠ¤ ë³¶ìŒë©´", "ì¸ë„ë„¤ì‹œì•„ì‹ ì»¤ë¦¬", "í—ˆë¸Œ ìŒˆìƒëŸ¬ë“œ"],
		   "cook_asian_group": ["íƒœêµ­ì‹ ë°”ë¹„í", "ë² íŠ¸ë‚¨ í™ˆíŒŒí‹°", "ì‹±ê°€í¬ë¥´ í•´ì‚°ë¬¼íŒŒí‹°", "ìƒ¤ë¸Œìƒ¤ë¸Œ", "ë¶„ì§œ ëŒ€ì ‘ì‹œ"],
	
		   // ğŸª snack (ê°„ì‹/ë¶„ì‹ë¥˜)
		   "snack_korean_alone": ["ë¼ë©´", "ì»µë°¥", "ì‚¼ê°ê¹€ë°¥", "í¸ì˜ì  ë„ì‹œë½", "ê³„ë€ë¹µ"],
		   "snack_korean_family": ["ëª¨ë‘ ì „", "ê°ìíŠ€ê¹€", "ê¹€ë§ì´", "ë–¡ê¼¬ì¹˜", "ì°ê³„ë€"],
		   "snack_korean_friend": ["ë–¡ë³¶ì´", "ìˆœëŒ€", "ê¹€ë°¥", "ì˜¤ë…", "íŠ€ê¹€ ì„¸íŠ¸"],
		   "snack_korean_date": ["í˜¸ë–¡", "ì „í†µê³¼ìì„¸íŠ¸", "ì¸ì ˆë¯¸ ë¹™ìˆ˜", "ì°¹ìŒ€ë„ë„›", "íŒ¥ë¹™ìˆ˜"],
		   "snack_korean_group": ["ë¶„ì‹ ë·”í˜", "ë–¡ë³¶ì´ ë¬´í•œë¦¬í•„", "êµ°ê²ƒì§ˆ ì„¸íŠ¸", "í¬ì¥ë§ˆì°¨ 5ì¢…", "ë„ì‹œë½ íƒ€ì›Œ"],

		   "snack_chinese_alone": ["íƒ•í›„ë£¨", "ì¶˜ê¶Œ", "ê½ˆë°°ê¸°", "ë”¤ì„¬", "ê³„ë€íƒ€ë¥´íŠ¸"],
		   "snack_chinese_family": ["ê½ˆë°°ê¸° í”Œë ˆí„°", "ë”¤ì„¬ ì„¸íŠ¸", "íƒ•í›„ë£¨ DIY", "ì¤‘êµ­ì‹ êµ°ë°¤", "ë§Œë‘ì°œ"],
		   "snack_chinese_friend": ["ë©˜ë³´ìƒ¤", "ìƒˆìš°ë³¼", "ì¶˜ê¶Œ+ì½œë¼ ì„¸íŠ¸", "í”¼ë„›ìƒŒë“œ", "ìœ ê³¼"],
		   "snack_chinese_date": ["ë””ì €íŠ¸ ì›”ë³‘", "ì—ê·¸íƒ€ë¥´íŠ¸", "í•‘ê±°ë§Œë‘", "ìëª½ì°¨+ì¿ í‚¤", "ê³ ê¸‰ ë”¤ì„¬ ì½”ìŠ¤"],
		   "snack_chinese_group": ["ì¤‘ì‹ ë””ì €íŠ¸ í”Œë˜í„°", "íƒ•í›„ë£¨ íƒ€ì›Œ", "ë”¤ì„¬ ë°”êµ¬ë‹ˆ", "ì¶˜ê¶Œ ë°”", "ë‹¨íŒ¥ë¹µ ì…°ì–´ë°•ìŠ¤"],

		   "snack_japanese_alone": ["í¸ì˜ì  ë„ì‹œë½", "ìŠ¤ë‚µìš°ë™", "íŒ¥í˜¸ë–¡", "í‘¸ë”©", "ëª¨ì°Œ"],
		   "snack_japanese_family": ["ì´ˆë°¥ë¡¤ ì„¸íŠ¸", "ëª¨ì°Œ í”Œë˜í„°", "ë„ë¼ì•¼ë¼ ëª¨ë‘ ", "ìš°ìœ í‘¸ë”©", "ìŠ¤ë‚µì„¸íŠ¸"],
		   "snack_japanese_friend": ["ë‹¤ì½”ì•¼ë¼", "ë¯¸ë‹ˆì´ˆë°¥", "ê³ ë¡œì¼€", "í‘¸ë”©+íƒ„ì‚°ì„¸íŠ¸", "ì†Œìœ ë¼ë©˜ ìŠ¤ë‚µë²„ì „"],
		   "snack_japanese_date": ["ë§ˆì°¨ ì•„ì´ìŠ¤í¬ë¦¼", "ë„ë¼ì•¼ë¼", "ì¼ë³¸ì‹ íŒ¥ë¹™ìˆ˜", "í‘¸ë”© í”Œë ˆì´íŠ¸", "ëª¨ì°Œ ëª¨ë‘ ë°•ìŠ¤"],
		   "snack_japanese_group": ["ìŠ¤ë‚µì´ˆë°¥ ì…°ì–´ì„¸íŠ¸", "ì¼ì‹ ë””ì €íŠ¸ íƒ€ì›Œ", "ëª¨ì°Œ ë·”í˜", "í¸ì˜ì  ê°„ì‹ í”Œë ˆì´íŠ¸", "í‘¸ë”© ë¯¸ë‹ˆë°”"],

		   "snack_western_alone": ["ê°ìì¹©", "ë„ë„›", "ë¨¸í•€", "ê·¸ë˜ë†€ë¼ë°”", "ì¿ í‚¤"],
		   "snack_western_family": ["ì»µì¼€ì´í¬", "ë„ë„›ì„¸íŠ¸", "ì¿ í‚¤ í”Œë˜í„°", "ì•„ì´ìŠ¤í¬ë¦¼ ë°”", "ë¸Œë¼ìš°ë‹ˆ"],
		   "snack_western_friend": ["í•«ë„ê·¸", "í”„ë ˆì¦", "ê°ìíŠ€ê¹€", "ì¹˜ì¦ˆë³¼", "ì¹˜í‚¨ë„ˆê²Ÿ"],
		   "snack_western_date": ["ì´ˆì½œë¦¿ íë“€", "í¬ë£¨ì•„ìƒ ìƒŒë“œ", "ë§ˆì¹´ë¡± ë°•ìŠ¤", "ì—ê·¸íƒ€ë¥´íŠ¸+ì»¤í”¼", "ì»µì¼€ì´í¬ 2ì¢…"],
		   "snack_western_group": ["ë””ì €íŠ¸ íƒ€ì›Œ", "ë² ì´ì»¤ë¦¬ ë°”êµ¬ë‹ˆ", "ë¯¸ë‹ˆ ë²„ê±° í”Œë˜í„°", "ì¹˜ì¦ˆ ë””í•‘ì„¸íŠ¸", "ê°ìíŠ€ê¹€ íƒ€ì›Œ"],

		   "snack_asian_alone": ["ë°˜ë¯¸ ë¯¸ë‹ˆìƒŒë“œ", "íŒŸíƒ€ì´ ì»µ", "ê³¼ì¼íŠ€ê¹€", "ë¯¸ê³ ë­ ì»µë¼ë©´", "ì¸ë„ë„¤ì‹œì•„ ê³¼ì"],
		   "snack_asian_family": ["ì‚¬ë–¼ ê¼¬ì¹˜", "ë°”ë‚˜ë‚˜ íŠ€ê¹€", "ìŠ¤í”„ë§ë¡¤", "ë³¶ìŒêµ­ìˆ˜ë³¼", "ì•„ì‹œì•„ ë¯¹ìŠ¤ í”Œë ˆì´íŠ¸"],
		   "snack_asian_friend": ["ì¶˜ê¶Œ", "íŒŸíƒ€ì´ ë¯¸ë‹ˆë²„ì „", "ë°˜ë¯¸ ìŠ¬ë¼ì´ìŠ¤", "ë”¥ì†ŒìŠ¤ ë„ˆê²Ÿ", "ìŒ€ê³¼ì"],
		   "snack_asian_date": ["ë§ê³  ì•„ì´ìŠ¤í¬ë¦¼", "ë² íŠ¸ë‚¨ ë””ì €íŠ¸", "ì»¤ìŠ¤í„°ë“œ ë²ˆ", "ë¡œë ìƒŒë“œ", "ì°¨ì´í‹°+ê°„ì‹"],
		   "snack_asian_group": ["ì•„ì‹œì•„ ìŠ¤ë‚µ íƒ€ì›Œ", "ë””ì €íŠ¸ í”Œë ˆí„°", "ë°”ì‚­í•œ ìŠ¤ë‚µë°”", "ìƒŒë“œìœ„ì¹˜ ë°”êµ¬ë‹ˆ", "ì»¤ë¦¬ë¹µ ì…°ì–´ë°•ìŠ¤"]
	    };
	
	    function updateNextSelect(changed) {
	        if (changed === 'mealType') {
	            document.getElementById('foodStyle').disabled = false;
	            document.getElementById('situation').disabled = true;
	        }
	        if (changed === 'foodStyle') {
	            document.getElementById('situation').disabled = false;
	        }
	    }
	
		let lastKey = null;
	
		function getRandomItem(arr) {
		    return arr[Math.floor(Math.random() * arr.length)];
		}
		
		let theWheel;
	
		function setupWheel(menuList) {
		    // ìƒ‰ìƒ ë°°ì—´ (ë©”ë‰´ ê°œìˆ˜ ì´ìƒìœ¼ë¡œ ì¶©ë¶„íˆ ì¤€ë¹„)
		    const colors = [
					'#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231',
			        '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe',
			        '#008080', '#e6beff', '#9a6324', '#fffac8', '#808080',
			        '#aaffc3', '#808000', '#ffd8b1'
			];
	
		    // ìƒ‰ìƒì„ ì„ê¸°
		    const shuffledColors = colors.sort(() => 0.5 - Math.random());
	
		    theWheel = new Winwheel({
		        canvasId: "wheelcanvas",
		        numSegments: menuList.length,
		        outerRadius: 200,
		        textFontSize: 16,
		        segments: menuList.map((name, idx) => ({
		            fillStyle: shuffledColors[idx % shuffledColors.length],  // ìƒ‰ì„ ìˆœí™˜í•´ì„œ ê³ ë¥´ê²Œ
		            text: name
		        })),
		        animation: {
		            type: 'spinToStop',
		            duration: 5,
		            spins: 8,
		            callbackFinished: function (indicatedSegment) {
		                document.getElementById('wheelResult').innerHTML =
		                    `ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë©”ë‰´ëŠ” <strong>${indicatedSegment.text}</strong>ì…ë‹ˆë‹¤! ğŸ½ï¸`;
		            }
		        }
		    });
		}
	
		function spinWheel() {
		    if (!theWheel) {
		        alert("ë¨¼ì € ì¶”ì²œí•  ë©”ë‰´ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”!");
		        return;
		    }
		    theWheel.startAnimation();
		}
		
		function showIndicator() {
		  const indicator = document.getElementById('wheel-indicator');
		  indicator.style.opacity = '1';
		  indicator.style.animation = 'fadeInDown 0.5s ease forwards';
		}
	
		function recommendMenu() {
		    const type = document.getElementById("mealType").value;
		    const category = document.getElementById("foodStyle").value;
		    const situation = document.getElementById("situation").value;
	
		    if (!type || !category || !situation) {
		        alert("ëª¨ë“  ì„ íƒì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
		        return;
		    }
	
		    const key = `${type}_${category}_${situation}`;
		    lastKey = key;
	
		    let menuOptions = menuMap[key];
	
		    if (!menuOptions) {
		        const allMenus = Object.values(menuMap).flat();
		        const backup = getRandomItem(allMenus);
		        document.getElementById("wheelResult").innerHTML = `ì¶”ì²œí•  ë©”ë‰´ê°€ ì—†ì–´ ëŒ€ì‹  <strong>${backup}</strong>ì„ ì¶”ì²œí•´ìš”! ğŸ˜‹`;
		        return;
		    }
	
		    setupWheel(menuOptions);
			
			showIndicator();
	
		    setTimeout(() => {
		        spinWheel();
		    }, 100);
			document.getElementById('wheelcanvas').style.display = 'block';
		}
		
		function reRecommendMenu() {
		    if (!lastKey || !menuMap[lastKey]) {
		        alert("ë¨¼ì € ì¶”ì²œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!");
		        return;
		    }
		    setupWheel(menuMap[lastKey]);
			
			setTimeout(() => {
			       spinWheel();
			}, 100);
		}  
	</script>
</body>
</html>